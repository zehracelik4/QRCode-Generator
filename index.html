<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatiable" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRRANGER</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    
</head>
<body>
    <nav class="header">
        <a href="#" class="logo">QRranger </a>
        <img src="images/9071075_dark_mode_icon.svg" class="dark-moon" id="darkmodemoon">
    </nav>
    <div class="sidebar">
        <div class="side-nav">
            <ul>
                <li><img src="images/qr-code-outline.svg" class="qr-icon"><a href="index.html" class="qr-create"><b>Create</b><br><i class="static-qr">Static QR Code</i></a></li>
                <li><img src="images/help-outline.svg"><a href="question.html">What's QR Code?</a></li>
                <li><img src="images/shield-half-outline.svg"><a href="privacy.html">Privacy</a></li>
                <li><img src="images/newspaper-outline.svg"><a href="terms.html">Terms of Use</a></li>
                <li><img src="images/call-outline.svg"><a href="contact.html">Contact Us</a></li>
            </ul>
        <ul>
            <li><img src="images/pinkgithub.svg"><a href="https://github.com/zehracelik4" class="git"><b>Github</b></a></li>
        </ul>
        </div>
    </div>
    
    <div class="container">
        <div class="setting">
            <h4>Create Your Own QR Code!</h4>
            <div class="input-wrap">
                <label for="data"><b>Data :</b></label>
                <textarea id="data" class="input-1x">QRANGER</textarea>
            </div>
            <div class="input-wrap">
                <label for="size"><b>Size :</b></label>
                <input type="range" id="size" min="10" max="30" value="1" class="input-1x">
            </div>
            <div class="input-wrap">
                <label for="logo"><b>Logo :</b></label>
                <input type="file" id="logo" hidden>
                <div class="input-2x">
                    <a href="javascript:browse();"><span class="material-symbols-outlined">photo</span></a>
                </div>
            </div>
            <div class="input-wrap">
                <label for="margin"><b>Margin :</b></label>
                <input type="range" id="margin" value="0" min="1" max="30" class="input-1x">
            </div>
            <div class="input-wrap">
                <label for="margin"><b>Dot Mode:</b></label>
                <select id="dot" class="input-1x">
                    <option value="square">Square</option>
                    <option value="dots">Dots</option>
                    <option value="rounded">Rounded</option>
                    <option value="extra-rounded">Extra Rounded</option>
                    <option value="classy">Classy</option>
                    <option value="classy-rounded">Classy Rounded</option>
                </select>
            </div>
            <div class="input-wrap">
                <label for="dot-color"><b>Dot Color:</b></label>
                <input type="color" id="dot-color-1" class="input-2x">
                <input type="color" id="dot-color-2" class="input-2x">
            </div>
            <div class="input-wrap">
                <label for="bg-color"><b>Background Color :</b></label>
                <input type="color" id="bg-color" class="input-2x">
            </div>
        </div>
        <div class="display">
            <div id="canvas"></div>
            <p id="sizeInfo"></p>
            <div class="button-container">
                <a href="#" class="button">
                    <div class="button-content">
                        <span class="button-text" id="buttontext" type="button">Download</span>
                        
                        <div class="button-reflection-1"></div>
                        <div class="button-reflection-2"></div>
                    </div>
                    <img src="images/watermelon.png" class="button-watermelon">
                    <img src="images/grapes.png" class="button-grapes">
                    <img src="images/blossom.png" class="button-blossom-1">
                    <img src="images/blossom.png" class="button-blossom-2">
                    <img src="images/cherry.png" class="button-cherry">
                    <img src="images/strawberry.png" class="button-strawberry">
                    <div class="button-shadow"></div>
                </a>
            </div>
        </div>
    </div>
</body>

<script>
const textEl = document.querySelector('#data');
const sizeEl = document.querySelector('#size');
const logoEl = document.querySelector('#logo');
const marginEl = document.querySelector('#margin');
const dotModeEl = document.querySelector('#dot');
const dotColorEl1 = document.querySelector('#dot-color-1');
const dotColorEl2 = document.querySelector('#dot-color-2');
const bgEl = document.querySelector('#bg-color');
const buttontextEl = document.querySelector('#buttontext');


let op= {
    width: 100,
    height: 100,
    type: "png",
    data: textEl.value,
    image: "",
    dotsOptions: {
        color: "#4267b2",
        type: "rounded",
        gradient: {
            "type": "linear",
            "colorStops": [
                {
                    "offset": 0,
                    "color": "#000000"
                },
                {
                    "offset": 1,
                    "color": "#000"
                }
            ]
        }
    },
    backgroundOptions: {
        color: "#fff",
    }
};

render();

sizeEl.addEventListener('input', e=>{
    op.width = e.target.value * 10;
    op.height = e.target.value * 10;
    render();
});

marginEl.addEventListener('input', e=>{
    op.imageOptions = {margin: e.target.value};
    render();
});

textEl.addEventListener('keyup', e=>{
    op.data = e.target.value;
    render();
});

dotModeEl.addEventListener('change', e=>{
    op.dotsOptions.type = e.target.value;
    render();
});

dotColorEl1.addEventListener('input', e=>{
    op.dotsOptions.gradient.colorStops[0].color = e.target.value;
    render();
});

dotColorEl2.addEventListener('input', e=>{
    op.dotsOptions.gradient.colorStops[1].color = e.target.value;
    render();
});

bgEl.addEventListener('input', e=>{
    op.backgroundOptions.color = e.target.value;
    render();
});

function render() {
  qrCode = new QRCodeStyling(op);
  let canvasEl = document.querySelector('#canvas');
  canvasEl.innerHTML = '';

  if (op.data) {
    qrCode.append(canvasEl);
    canvasEl.nextElementSibling.innerHTML = `${op.width}px x ${op.height}px`;
  } else {
    canvasEl.nextElementSibling.innerHTML = '';
  }
}

render();




function browse(){
    logoEl.click();
}

logoEl.addEventListener('change', e=> {
    let file = e.target.files[0];
    let reader = new FileReader();
    reader.onload = ()=> {
        op.image = reader.result;
        render();
    },
    reader.readAsDataURL(file);
});

buttontextEl.addEventListener('click', e=> {
    qrCode.download({name:'qr', extension:'png'});
});

document.addEventListener('DOMContentLoaded', function() {
    const darkmodemoon = document.getElementById("darkmodemoon");
    const body = document.body;


    const darkModePreference = localStorage.getItem('darkModePreference');
    if (darkModePreference === 'enabled') {
    body.classList.add('dark-theme');
    darkmodemoon.src = "images/2995008_colors_colour_rainbow_colored_sun_icon.svg";
    }

    darkmodemoon.onclick = function() {
    body.classList.toggle("dark-theme");

    if (body.classList.contains("dark-theme")) {
        darkmodemoon.src = "images/2995008_colors_colour_rainbow_colored_sun_icon.svg";
        localStorage.setItem('darkModePreference', 'enabled');
    } else {
        darkmodemoon.src = "images/9071075_dark_mode_icon.svg";
        localStorage.setItem('darkModePreference', 'disabled');
    }
    };
});
</script>
</html>